var renderer, scene, camera;
var cubes = [];
var rot = 0;
var start=0;
var barrelSize=0;
function getPosition(coordinate) {
  return coordinate[0] + coordinate[1] * 15
}

var coordinates_10_p = [[0,5],[1,5],[2,5],[3,5],[4,5],[5,5],[0,7],[1,7],[2,7],[3,7],[4,7],[5,7],[0,8],[5,8],[0,9],[1,9],[2,9],[3,9],[4,9],[5,9],[8,7],[9,7],[10,7],[11,7],[12,7],[13,7],[14,7],[10,5],[10,6],[10,8],[10,9]]
var coordinates_9_p = [[0,5],[1,5],[2,5],[3,5],[6,5],[0,6],[3,6],[6,6],[0,7],[3,7],[6,7],[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[9,5],[14,5],[8,6],[9,6],[10,6],[11,6],[12,6],[13,6],[14,6],[9,7],[9,8],[10,8],[11,8],[12,8],[13,8],[14,8],[14,9]]
var coordinates_8_p = [[0,5],[1,5],[2,5],[3,5],[6,5],[0,6],[3,6],[6,6],[0,7],[3,7],[6,7],[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[4,5],[5,5],[13,3],[12,4],[9,5],[10,5],[11,5],[9,8],[10,8],[11,8],[12,9],[13,10]]
var coordinates_7_p = [[0,5],[0,6],[0,7],[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[10,4],[10,5],[8,6],[9,6],[10,6],[11,6],[12,6],[13,6],[14,6],[10,7],[14,7],[10,8],[14,8]]
var coordinates_6_p = [[0,5],[1,5],[2,5],[3,5],[4,5],[5,5],[6,5],[0,6],[3,6],[6,6],[0,7],[3,7],[6,7],[0,8],[3,8],[4,8],[5,8],[6,8],[8,6],[10,3],[14,4],[10,5],[12,5],[13,5],[14,5],[8,6],[10,6],[10,7],[12,7],[13,7],[14,7],[10,8],[14,8]]
var coordinates_5_p = [[0,5],[1,5],[2,5],[3,5],[6,5],[0,6],[3,6],[6,6],[0,7],[3,7],[6,7],[0,8],[3,8],[4,8],[5,8],[6,8],[8,4],[10,4],[13,4],[8,5],[10,5],[11,5],[12,5],[13,5],[8,6],[9,6],[10,6],[13,6],[8,7],[10,7],[13,7],[8,8],[10,8],[11,8],[12,8],[13,8],[13,9]]
var coordinates_4_p = [[0,5],[1,5],[2,5],[3,5],[3,6],[3,7],[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[9,4],[10,4],[11,4],[12,4],[13,4],[14,4],[9,5],[12,5],[14,5],[9,6],[10,6],[11,6],[14,6],[9,7],[10,7],[11,7],[14,7],[9,8],[12,8],[14,8],[9,9],[10,9],[11,9],[12,9],[13,9],[14,9]]
var coordinates_3_p = [[0,5],[3,5],[6,5],[0,6],[3,6],[6,6],[0,7],[3,7],[6,7],[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[13,4],[9,5],[13,5],[9,6],[11,6],[13,6],[9,7],[11,7],[13,7],[9,8],[13,8],[13,9]]
var coordinates_2_p = [[0,5],[3,5],[4,5],[5,5],[6,5],[0,6],[3,6],[6,6],[0,7],[3,7],[6,7],[0,8],[1,8],[2,8],[3,8],[6,8],[13,4],[10,5],[13,5],[10,6],[13,6],[10,7],[13,7],[10,8],[13,8],[13,9]]
var coordinates_1_p = [[0,7],[1,7],[2,7],[3,7],[4,7],[5,7],[6,7],[11,5],[11,6],[11,7],[11,8],[11,9]]
var coordinates_10 = coordinates_10_p.map(getPosition)
var coordinates_9 = coordinates_9_p.map(getPosition)
var coordinates_8 = coordinates_8_p.map(getPosition)
var coordinates_7 = coordinates_7_p.map(getPosition)
var coordinates_6 = coordinates_6_p.map(getPosition)
var coordinates_5 = coordinates_5_p.map(getPosition)
var coordinates_4 = coordinates_4_p.map(getPosition)
var coordinates_3 = coordinates_3_p.map(getPosition)
var coordinates_2 = coordinates_2_p.map(getPosition)
var coordinates_1 = coordinates_1_p.map(getPosition)
var targetCoo = [coordinates_10, coordinates_9, coordinates_8,coordinates_7,coordinates_6,coordinates_5,coordinates_4,coordinates_3,coordinates_2,coordinates_1]




var coordinates_15_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14]]
var coordinates_14_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14]]
var coordinates_13_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14]]
var coordinates_12_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14]]
var coordinates_11_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14]]
var coordinates_10_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14]]
var coordinates_9_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14],
[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[6,11],[6,12],[6,13],[6,14]]
var coordinates_8_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14],
[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[6,11],[6,12],[6,13],[6,14],
[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[7,10],[7,11],[7,12],[7,13],[7,14]]
var coordinates_7_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14],
[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[6,11],[6,12],[6,13],[6,14],
[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[7,10],[7,11],[7,12],[7,13],[7,14],
[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14]]
var coordinates_6_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14],
[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[6,11],[6,12],[6,13],[6,14],
[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[7,10],[7,11],[7,12],[7,13],[7,14],
[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],
[9,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9],[9,10],[9,11],[9,12],[9,13],[9,14]]
var coordinates_5_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14],
[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[6,11],[6,12],[6,13],[6,14],
[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[7,10],[7,11],[7,12],[7,13],[7,14],
[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],
[9,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9],[9,10],[9,11],[9,12],[9,13],[9,14],
[10,0],[10,1],[10,2],[10,3],[10,4],[10,5],[10,6],[10,7],[10,8],[10,9],[10,10],[10,11],[10,12],[10,13],[10,14]]
var coordinates_4_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14],
[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[6,11],[6,12],[6,13],[6,14],
[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[7,10],[7,11],[7,12],[7,13],[7,14],
[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],
[9,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9],[9,10],[9,11],[9,12],[9,13],[9,14],
[10,0],[10,1],[10,2],[10,3],[10,4],[10,5],[10,6],[10,7],[10,8],[10,9],[10,10],[10,11],[10,12],[10,13],[10,14],
[11,0],[11,1],[11,2],[11,3],[11,4],[11,5],[11,6],[11,7],[11,8],[11,9],[11,10],[11,11],[11,12],[11,13],[11,14]]
var coordinates_3_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14],
[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[6,11],[6,12],[6,13],[6,14],
[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[7,10],[7,11],[7,12],[7,13],[7,14],
[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],
[9,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9],[9,10],[9,11],[9,12],[9,13],[9,14],
[10,0],[10,1],[10,2],[10,3],[10,4],[10,5],[10,6],[10,7],[10,8],[10,9],[10,10],[10,11],[10,12],[10,13],[10,14],
[11,0],[11,1],[11,2],[11,3],[11,4],[11,5],[11,6],[11,7],[11,8],[11,9],[11,10],[11,11],[11,12],[11,13],[11,14],
[12,0],[12,1],[12,2],[12,3],[12,4],[12,5],[12,6],[12,7],[12,8],[12,9],[12,10],[12,11],[12,12],[12,13],[12,14]]
var coordinates_2_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14],
[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[6,11],[6,12],[6,13],[6,14],
[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[7,10],[7,11],[7,12],[7,13],[7,14],
[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],
[9,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9],[9,10],[9,11],[9,12],[9,13],[9,14],
[10,0],[10,1],[10,2],[10,3],[10,4],[10,5],[10,6],[10,7],[10,8],[10,9],[10,10],[10,11],[10,12],[10,13],[10,14],
[11,0],[11,1],[11,2],[11,3],[11,4],[11,5],[11,6],[11,7],[11,8],[11,9],[11,10],[11,11],[11,12],[11,13],[11,14],
[12,0],[12,1],[12,2],[12,3],[12,4],[12,5],[12,6],[12,7],[12,8],[12,9],[12,10],[12,11],[12,12],[12,13],[12,14],
[13,0],[13,1],[13,2],[13,3],[13,4],[13,5],[13,6],[13,7],[13,8],[13,9],[13,10],[13,11],[13,12],[13,13],[13,14]]
var coordinates_1_line = [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],
[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[1,10],[1,11],[1,12],[1,13],[1,14],
[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[2,10],[2,11],[2,12],[2,13],[2,14],
[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[3,10],[3,11],[3,12],[3,13],[3,14],
[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[4,10],[4,11],[4,12],[4,13],[4,14],
[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[5,10],[5,11],[5,12],[5,13],[5,14],
[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[6,11],[6,12],[6,13],[6,14],
[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[7,10],[7,11],[7,12],[7,13],[7,14],
[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],
[9,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9],[9,10],[9,11],[9,12],[9,13],[9,14],
[10,0],[10,1],[10,2],[10,3],[10,4],[10,5],[10,6],[10,7],[10,8],[10,9],[10,10],[10,11],[10,12],[10,13],[10,14],
[11,0],[11,1],[11,2],[11,3],[11,4],[11,5],[11,6],[11,7],[11,8],[11,9],[11,10],[11,11],[11,12],[11,13],[11,14],
[12,0],[12,1],[12,2],[12,3],[12,4],[12,5],[12,6],[12,7],[12,8],[12,9],[12,10],[12,11],[12,12],[12,13],[12,14],
[13,0],[13,1],[13,2],[13,3],[13,4],[13,5],[13,6],[13,7],[13,8],[13,9],[13,10],[13,11],[13,12],[13,13],[13,14],
[14,0],[14,1],[14,2],[14,3],[14,4],[14,5],[14,6],[14,7],[14,8],[14,9],[14,10],[14,11],[14,12],[14,13],[14,14]]

var coordinates_15_line_pos = coordinates_15_line.map(getPosition)
var coordinates_14_line_pos = coordinates_14_line.map(getPosition)
var coordinates_13_line_pos = coordinates_13_line.map(getPosition)
var coordinates_12_line_pos = coordinates_12_line.map(getPosition)
var coordinates_11_line_pos = coordinates_11_line.map(getPosition)
var coordinates_10_line_pos = coordinates_10_line.map(getPosition)
var coordinates_9_line_pos = coordinates_9_line.map(getPosition)
var coordinates_8_line_pos = coordinates_8_line.map(getPosition)
var coordinates_7_line_pos = coordinates_7_line.map(getPosition)
var coordinates_6_line_pos = coordinates_6_line.map(getPosition)
var coordinates_5_line_pos = coordinates_5_line.map(getPosition)
var coordinates_4_line_pos = coordinates_4_line.map(getPosition)
var coordinates_3_line_pos = coordinates_3_line.map(getPosition)
var coordinates_2_line_pos = coordinates_2_line.map(getPosition)
var coordinates_1_line_pos = coordinates_1_line.map(getPosition)

var targetDefaultOpeningCoo = [coordinates_15_line_pos, coordinates_14_line_pos, coordinates_13_line_pos,coordinates_12_line_pos,coordinates_11_line_pos,coordinates_10_line_pos,coordinates_9_line_pos,coordinates_8_line_pos,coordinates_7_line_pos,coordinates_6_line_pos,coordinates_5_line_pos,coordinates_4_line_pos,coordinates_3_line_pos,coordinates_2_line_pos,coordinates_1_line_pos]

var listener = new THREE.AudioListener();

// create a global audio source
var sound = new THREE.Audio( listener );

// load a sound and set it as the Audio object's buffer
var audioLoader = new THREE.AudioLoader();

function getTargetCoo(time) {
  var sec;
  if(barrelSize==0)
  {
    sec=Math.floor(time / 1000);
  }
  else {
    sec=Math.floor(time / 1000+10-barrelSize);
  }
  return targetCoo[sec]
}


function getDefaultOpeningCoo(time) {
  var sec=(Math.floor(time / 1000))%15;
  return targetDefaultOpeningCoo[sec]
}


function init() {
  scene = new THREE.Scene();
  var W = window.innerWidth,
  H = window.innerHeight;

  camera = new THREE.PerspectiveCamera(45, W / H, .1, 1000);
  camera.position.set(0, 40, 80);
  camera.lookAt(scene.position);
  camera.add(listener);

  var spotLight = new THREE.SpotLight(0xFFFFFF);
  spotLight.position.set(0, 1000, 0);
  scene.add(spotLight);

  renderer = new THREE.WebGLRenderer({antialias:true});
  //renderer.setClearColor( Math.random() * 0xFFFFFF);
  renderer.setClearColor(0xffffff);
  renderer.setSize(W, H);

  controls = new THREE.OrbitControls(camera, renderer.domElement);

  //Create a two dimensional grid of objects, and position them accordingly
  for(var z=10;z>-10;z-=10){
    for (var x = -35; x < 40; x += 5) { // Start from -35 and sequentially add one every 5 pixels
    for (var y = -35; y < 40; y += 5) {

      var boxGeometry = new THREE.BoxGeometry(3, 3, 3);

      var circleGeometry = new THREE.CircleBufferGeometry( 1.5, 32 );

      //The color of the material is assigned a random color
    //  var boxMaterial = new THREE.MeshLambertMaterial({color:Math.random()*0xFFFFFF});
    var boxMaterial = new THREE.MeshLambertMaterial({color:0x000000});

    var texture = new THREE.TextureLoader().load("texture/further.jpg");

    var uniqueMaterial = new THREE.MeshBasicMaterial({map:texture});

    var mesh;

if((x+y)%3==2&&x>15)
{
  if(z>0){
      mesh = new THREE.Mesh(circleGeometry, uniqueMaterial);
  }
  else {
      mesh = new THREE.Mesh(boxGeometry, boxMaterial);
  }
}
else
{
  if(z<=0){
      mesh = new THREE.Mesh(circleGeometry, uniqueMaterial);
  }
  else {
      mesh = new THREE.Mesh(boxGeometry, boxMaterial);
  }

}

      //mesh.castShadow = true;
      mesh.position.x = x;
      mesh.position.z = y;
      mesh.position.y = z;



      scene.add(mesh);
      cubes.push(mesh);
    }
}
}


  document.body.appendChild(renderer.domElement);
}


function drawFrame(ts){
  if(!start) start = ts
 var interval = ts - start
 var target = getTargetCoo(interval)
 var localTarget = getDefaultOpeningCoo(interval)
 var percent = 1 - (interval%1000/1000)
  var desti=0;
  var absx=0;
  var absz=0;
  if(barrelSize==0||barrelSize>10||barrelSize<1)
  {
    audioLoader.load( 'audio/opening.wav', function( buffer ) {
      sound.setBuffer(buffer);
      sound.setLoop(true);
      sound.setVolume(0.5);
      sound.play();
    });
  }
else if ((!target)){
} else {
  audioLoader.load('audio/1s.wav', function(buffer) {
    sound.setBuffer(buffer);
    sound.setLoop(false);
    sound.setVolume(0.5);
    sound.play();
  });
}
  requestAnimationFrame(drawFrame);
  cubes.forEach(function(c,i){
    if(barrelSize==0||barrelSize>10||barrelSize<1)
  {
    if(!localTarget){
      //do nothing;
  }else{
    if(!!~localTarget.indexOf(i)) {
      c.scale.y = 1
      c.material.color.setHex(Math.random() * 0xFFFFFF);
      for(var i=0;i<3;i++){
          c.rotation.x+=Math.random()*0.01;
          c.rotation.z+=Math.random()*0.02;
          c.rotation.y+=Math.random()*0.01;
      }
    } else {
      c.scale.y = 1
      if(c.position.y<=0){
        c.material.color.setHex(Math.random()*0xFFFFFF);
      }else {
        c.material.color.setHex(0x000000);
      }
    }
  }
  }
else if ((!target)){
  if(c.position.x<desti){
    absx=(desti-c.position.x);
  }else {
    absx=(c.position.x-desti);
  }
  if(c.position.z<desti){
    absz=(desti-c.position.z);
  }else {
    absz=(c.position.z-desti);
  }
  c.rotation.x=0;
  c.rotation.y=0;
  c.rotation.z=0;
  c.scale.y = Math.cos(ts/1000*Math.PI+(35-absx)*4.95+(40-absz)*4.95) +1;
  c.material.color.setHex(Math.random() * 0xFFFFFF);
} else {
  console.log(target);
  c.rotation.x=0;
  c.rotation.y=0;
  c.rotation.z=0;
  if (!!~target.indexOf(i)) {
    c.scale.y = 5* percent
    c.material.color.setHex(Math.random() * 0xFFFFFF);
  } else {
    c.scale.y = 1;
    c.material.color.setHex( 0Xc0c0c0);
    if(c.position.y<0){
      c.material.color.setHex( 0X000000);
    }
  }
}
});

  renderer.render(scene, camera);
}

init();
drawFrame();
document.querySelector('.btn').addEventListener('click', function name() {
  start = 0,
  barrelSize=document.getElementById("inputnum").value;
  if(barrelSize<=0||barrelSize>10)
  alert("please enter a positive integer less than or eauql to 10!");
})
